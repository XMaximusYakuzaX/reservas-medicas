# Reservas Médicas — Expo + React Native + JWT + API de clima · App con autenticación JWT (Node/Express), token en Expo Secure Store, consumo de OpenWeather (principal) y Open-Meteo (fallback), funciona en emulador y dispositivo real con Expo Go; ## 1) Requisitos: Node 18+ (mejor 20 LTS), npm 9/10+, cuenta OpenWeather (API key), Expo (npx expo), teléfono con Expo Go o emulador; ## 2) Estructura: reservas-medicas/ app.json App.tsx src/api/http.ts (Axios base + interceptor JWT), src/api/auth.ts (login + /profile), src/api/weather.ts (OpenWeather + Open-Meteo), src/auth/AuthContext.tsx (SecureStore), src/auth/useAuth.ts, src/navigation/AppNavigator.tsx, src/screens/LoginScreen.tsx HomeScreen.tsx WeatherScreen.tsx, server/index.js (/auth/login y /profile), server/package.json; ## 3) Instalación (raíz): npm install · si faltan libs: npm i axios jwt-decode @react-navigation/native @react-navigation/native-stack && npx expo install expo-secure-store expo-constants react-native-screens react-native-safe-area-context react-native-reanimated; ## 4) Instalación (backend): cd server && npm install · si no existe package.json: npm init -y && npm i express cors jsonwebtoken bcryptjs && npm i -D nodemon && (añadir scripts {"dev":"nodemon index.js","start":"node index.js"}); ## 5) Configuración (.env o app.json extra): OPENWEATHER_API_KEY=TU_KEY · API_BASE_URL=http://localhost:4000 (emulador Android usar http://10.0.2.2:4000; dispositivo real usar http://<IP_LAN_PC>:4000); ## 6) Ejecutar backend: cd server && npm run dev (muestra Auth API en http://localhost:4000); ## 7) Ejecutar app: npx expo start -c (Connection: LAN o Tunnel) y abrir en Expo Go; ## 8) Credenciales demo: email demo@med.app · pass 123456; ## 9) Integración clave: AuthContext.tsx (login + guardar token SecureStore), http.ts (axios base + Authorization), weather.ts (consulta OpenWeather y fallback Open-Meteo), server/index.js (emitir/validar JWT con middleware); ## 10) Troubleshooting: “Network request failed” → usar IP LAN real y abrir puerto 4000 en firewall; “Invalid API key” → esperar hasta ~2h activación de OpenWeather; 8081 ocupado → aceptar puerto alterno o matar proceso; 401 → limpiar SecureStore y re-login; ## 11) Evidencias: capturas de login, Home con /profile OK, Weather con datos (fuente), y fragmentos de código (AuthContext, http, weather, server).